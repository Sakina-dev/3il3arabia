:root {
  --bg: #081033;
  --fg: #f7e3a2;
  --muted: #e6d7a8;
  --royal: #0f1e6b;
  --gold: #f7e3a2;
  --accent-weak: rgba(247, 227, 162, 0.12);
  --border: rgba(247, 227, 162, 0.55);
  --success: #22c55e;
  --danger: #ef4444;
  --radius: 16px;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--fg);
  background:
    linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.62)),
    url('Instagram post - 10.png') center center / cover no-repeat fixed;
  line-height: 1.6;
}

.app-header { padding: 12px 16px; border-bottom: 1px solid transparent; background: transparent; color: var(--gold); position: sticky; top: 0; z-index: 10; }
.header-card { max-width: 1100px; margin: 0 auto; padding: 12px 16px; background: linear-gradient(180deg, rgba(12,20,70,.9), rgba(6,12,42,.96)); border: none; border-radius: var(--radius); backdrop-filter: saturate(160%) blur(6px); box-shadow: 0 10px 28px rgba(0,0,0,.32); }
.header-inner { max-width: 1100px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; gap: 12px; }
.brand { display: inline-flex; align-items: center; gap: 10px; text-decoration: none; color: var(--gold); }
.brand-title { font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; font-weight: 800; letter-spacing: .3px; }
.brand-sub { font-size: 12px; color: var(--muted); }
.site-nav { display: inline-flex; gap: 10px; align-items: center; }
.nav-link { color: var(--gold); text-decoration: none; padding: 8px 10px; border-radius: 9999px; border: 1px solid transparent; }
.nav-link:hover, .nav-link:focus-visible { border-color: var(--gold); background: rgba(244,210,122,.08); }

.subheader-card { max-width: 980px; margin: 10px auto 0; padding: 6px 10px; background: linear-gradient(180deg, rgba(7,13,40,.65), rgba(7,13,40,.9)); border: none; border-radius: calc(var(--radius) - 2px); backdrop-filter: saturate(160%) blur(8px); }
.tabs { display: flex; gap: 8px; padding: 8px 10px; border-bottom: 0; background: transparent; position: sticky; top: 60px; z-index: 5; justify-content: center; }
.tab { appearance: none; border: 1px solid transparent; background: transparent; color: var(--fg); padding: 10px 14px; border-radius: 12px; cursor: pointer; font-weight: 700; font-size: 14px; display: inline-flex; align-items: center; gap: 8px; position: relative; }
.tab .icon { width: 18px; height: 18px; color: var(--gold); }
.tab.is-active { color: var(--gold); }
.tab.is-active::after { content: ""; position: absolute; left: 12px; right: 12px; bottom: 0; height: 3px; border-radius: 3px; background: linear-gradient(90deg, #FFE8A3, #C9B15F); }

.tab-panels { max-width: 980px; margin: 0 auto; padding: 16px; }
.panel { display: none; content-visibility: auto; contain-intrinsic-size: 800px 600px; }
.panel.is-active { display: block; }
.panel-header { display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px; }
.panel-header h2 { margin: 0; font-size: 20px; font-weight: 800; letter-spacing: .2px; }
.hero { text-align: center; margin: 12px auto 16px; max-width: 760px; }
.hero-title { margin: 0 0 6px; font-size: clamp(28px, 6vw, 44px); font-weight: 800; letter-spacing: .4px; font-family: 'Playfair Display', serif; background: linear-gradient(180deg, #FFE8A3, #e5cf86 60%, #bfa65c); -webkit-background-clip: text; background-clip: text; color: transparent; text-shadow: 0 2px 14px rgba(255,232,163,.2); }
.hero-title::after { content: ""; display: block; height: 6px; width: 140px; margin: 10px auto 0; border-radius: 9999px; background: linear-gradient(90deg, #FFE8A3, #C9B15F); box-shadow: 0 6px 18px rgba(255,232,163,.35); }
.hero-sub { margin: 0; color: var(--muted); font-size: 17px; text-shadow: 0 1px 8px rgba(0,0,0,.25); }
.controls { display: flex; gap: 8px; align-items: center; }
.home-actions { flex-direction: column; align-items: stretch; gap: 12px; max-width: 420px; margin: 0 auto; }
.home-actions .btn { justify-content: center; }
.meta { display: flex; gap: 12px; color: var(--muted); font-size: 14px; }

.btn { border: 1px solid rgba(255,255,255,.12); background: #0F1E6B; color: #fff; padding: 10px 16px; border-radius: 9999px; cursor: pointer; font-weight: 800; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 6px 16px rgba(0,0,0,.28); }
.btn .icon { width: 18px; height: 18px; color: #FFE8A3; }
.btn:hover { filter: brightness(1.06); }
.btn.primary { background: #152A8A; color: #fff; border-color: rgba(255,255,255,.2); box-shadow: 0 8px 20px rgba(21,42,138,.35); }
.btn.primary .icon { color: #FFE8A3; }
.btn.primary:hover { filter: brightness(1.08); }
.glass-card { max-width: 760px; margin: 12px auto 16px; padding: 14px 14px 16px; border-radius: var(--radius); background: linear-gradient(180deg, rgba(15, 30, 107, 0.55), rgba(8, 16, 50, 0.66)); border: 1px solid rgba(255,255,255,.18); backdrop-filter: saturate(160%) blur(10px); box-shadow: 0 16px 40px rgba(0,0,0,.38), inset 0 0 0 1px rgba(255,255,255,.06); }
.separator { height: 12px; margin: 0 auto 12px; width: 120px; border-radius: 9999px; background: linear-gradient(90deg, rgba(255,232,163,.6), rgba(201,177,95,.7)); box-shadow: 0 4px 12px rgba(255,232,163,.35); }

/* Variante large et esthétique */
.btn.lg { padding: 16px 22px; font-size: 16px; border-width: 2px; box-shadow: 0 10px 26px rgba(0,0,0,.35); }
.btn.lg .icon { width: 22px; height: 22px; }
.btn.glow {
  background: linear-gradient(180deg, #1b2fa3, #0F1E6B);
  border-color: rgba(255,255,255,.28);
  box-shadow: 0 14px 34px rgba(21,42,138,.45), inset 0 0 0 1px rgba(255,255,255,.08);
}
.btn.glow:hover { filter: brightness(1.1); transform: translateY(-1px); }

/* Segmenté difficulté */
.segmented { display: inline-flex; gap: 8px; padding: 4px; background: rgba(255,255,255,0.04); border-radius: 9999px; border: 1px solid var(--border); box-shadow: 0 4px 14px rgba(0,0,0,.22); }
.seg-btn { appearance: none; background: rgba(255,255,255,0.04); border: 1px solid var(--border); color: var(--gold); padding: 8px 14px; border-radius: 9999px; font-weight: 800; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; transition: background-color .12s ease, color .12s ease, border-color .12s ease, transform .08s ease; }
.seg-btn:hover { background: rgba(244,210,122,0.10); border-color: var(--gold); }
.seg-btn:active { transform: scale(.98); }
.seg-btn svg { width: 16px; height: 16px; color: currentColor; }
.seg-btn.is-active { background: linear-gradient(180deg, #152A8A, #0F1E6B); color: #ffffff; border-color: rgba(255,255,255,.2); box-shadow: 0 8px 18px rgba(15,30,107,.35); }
.seg-btn:focus-visible { outline: 3px solid rgba(247,227,162,.5); outline-offset: 2px; }
.input { border: 1px solid var(--border); padding: 10px 12px; border-radius: 8px; width: 100%; max-width: 320px; font-size: 16px; }

/* Mémoire */
.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; }
.card { background: transparent; border: 1px solid var(--border); border-radius: 14px; padding: 16px; cursor: pointer; min-height: 110px; display: flex; align-items: center; justify-content: center; text-align: center; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease; color: #ffffff; }
.card:hover { transform: translateY(-2px); }
.card[data-face="ar"] { font-family: "Noto Naskh Arabic", serif; font-size: 38px; }
.card[data-face="fr"] { font-size: 18px; font-weight: 700; }
.card.is-matched { 
  background: linear-gradient(180deg, rgba(255,232,163,0.28), rgba(201,177,95,0.32)); 
  border-color: #FFE8A3; 
  box-shadow: 0 6px 18px rgba(255,232,163,.25), inset 0 0 0 2px rgba(255,232,163,0.6);
}
.card.is-revealed { background: rgba(255,255,255,0.04); border-color: rgba(244,210,122,0.45); box-shadow: 0 2px 8px rgba(16,35,126,.42); }

/* Fiches (flip) */
.flashcard { position: relative; user-select: none; background: transparent; border-radius: var(--radius); padding: 0; width: 100%; max-width: 680px; aspect-ratio: 1 / 1; margin: 0 auto; display: flex; align-items: center; justify-content: center; font-size: clamp(48px, 9vw, 92px); font-family: "Noto Naskh Arabic", serif; cursor: pointer; color: #ffffff; perspective: 1000px; overflow: hidden; }
.flash-inner { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; transition: transform .5s ease; border-radius: var(--radius); box-shadow: 0 10px 28px rgba(0,0,0,.28); }
.flashcard.is-flipped .flash-inner { transform: rotateY(180deg); }
.flash-face { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; padding: 64px 24px; backface-visibility: hidden; border-radius: inherit; box-sizing: border-box; text-align: center; }
.flash-face.front { background: linear-gradient(180deg, rgba(18,30,90,.88), rgba(8,16,50,.94)); color: #ffffff; }
.flash-face.back { background: linear-gradient(180deg, rgba(40,22,4,.94), rgba(24,12,2,.98)); color: var(--gold); transform: rotateY(180deg); }
.hint { color: var(--muted); font-size: 13px; margin-top: 8px; }
.flash-controls { display: flex; gap: 10px; justify-content: center; margin-top: 12px; }
.flash-controls .btn { background: linear-gradient(180deg, #152A8A, #0F1E6B); color: #ffffff; border-color: rgba(255,255,255,.15); }
.flash-controls .btn .icon { color: #ffe8a3; }
.flash-controls .btn:hover { filter: brightness(1.06); }

/* Quiz */
.quiz { display: grid; gap: 12px; }
.quiz-progress { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 10px; }
.progress-bar { position: relative; height: 10px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.18); border-radius: 9999px; overflow: hidden; box-shadow: inset 0 2px 6px rgba(0,0,0,.25); }
.progress-fill { position: absolute; left: 0; top: 0; bottom: 0; width: 0%; background: linear-gradient(90deg, #22c55e, #16a34a); box-shadow: 0 6px 18px rgba(34,197,94,.35); }
.timer { font-weight: 800; color: var(--gold); border: 1px solid rgba(255,255,255,.18); padding: 6px 10px; border-radius: 10px; background: rgba(255,255,255,.06); }
.quiz-score { display: flex; gap: 12px; justify-content: center; color: var(--gold); font-weight: 800; flex-wrap: wrap; }
.quiz-score span { background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.12); padding: 6px 10px; border-radius: 9999px; }
.quiz-letter { font-family: "Noto Naskh Arabic", serif; font-size: 80px; text-align: center; padding: 16px; color: var(--gold); }
.quiz-feedback { min-height: 24px; font-weight: 600; }
.quiz-result { background: linear-gradient(180deg, rgba(21,42,138,.35), rgba(15,30,107,.45)); color: #FFE8A3; padding: 10px 14px; border: 1px solid rgba(255,255,255,.18); border-radius: 14px; text-align: center; font-weight: 800; }
.ok { color: var(--success); background: rgba(34,197,94,.12); padding: 6px 10px; border-radius: 10px; display: inline-block; }
.ko { color: #fff; background: rgba(239,68,68,.16); padding: 6px 10px; border-radius: 10px; display: inline-block; }

.quiz-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 10px; }
.quiz-option { border: 2px solid var(--border); background: rgba(255,255,255,0.06); border-radius: 9999px; padding: 14px 16px; cursor: pointer; font-weight: 800; text-align: center; box-shadow: 0 6px 18px rgba(0,0,0,.32); transition: transform .08s ease, box-shadow .12s ease, border-color .12s ease, background-color .12s ease, color .12s ease; color: var(--gold); }
.quiz-option:hover { border-color: var(--gold); background: rgba(244,210,122,0.08); box-shadow: 0 6px 18px rgba(15,30,107,.32); }
.quiz-option:active { transform: scale(.98); }
.quiz-option.correct { background: linear-gradient(180deg, #22c55e, #16a34a); border-color: rgba(255,255,255,.2); color: #fff; box-shadow: 0 6px 18px rgba(34,197,94,.35); }
.quiz-option.wrong { background: linear-gradient(180deg, #ef4444, #dc2626); border-color: rgba(255,255,255,.2); color: #fff; box-shadow: 0 6px 18px rgba(239,68,68,.35); }
.quiz-actions { display: flex; gap: 8px; align-items: center; }

@keyframes shake { 0%,100%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)} }
.shake { animation: shake .42s cubic-bezier(.36,.07,.19,.97); }

.app-footer { padding: 24px 16px; border-top: 1px solid transparent; color: var(--gold); background: transparent; margin-top: 40px; }
.footer-card { max-width: 1100px; margin: 0 auto; padding: 22px 18px; background: linear-gradient(180deg, rgba(12,20,70,.9), rgba(6,12,42,.98)); border: none; border-radius: var(--radius); box-shadow: 0 12px 32px rgba(0,0,0,.35); backdrop-filter: saturate(160%) blur(6px); }
.footer-inner { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: 1fr; gap: 18px; }
.f-brand { display: inline-flex; align-items: center; gap: 10px; }
.col-text { margin: 0 0 6px; color: var(--muted); }
.f-links { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; }
.col-title { font-family: 'Playfair Display', serif; font-weight: 800; margin-bottom: 6px; }
.col-link { display: inline-block; color: var(--gold); text-decoration: none; opacity: .9; }
.col-link:hover { opacity: 1; text-decoration: underline; }
.copy { max-width: 1100px; margin: 10px auto 0; text-align: center; color: var(--muted); font-size: 13px; }

/* Accessibilité */
:where(button, .btn, .tab, input).focus-visible, :where(button, .btn, .tab, input):focus-visible { outline: 3px solid rgba(247,227,162,.5); outline-offset: 2px; }
.skip-link { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
.skip-link:focus { position: fixed; left: 16px; top: 12px; width: auto; height: auto; background: rgba(0,0,0,.6); color: #fff; padding: 8px 12px; border-radius: 8px; z-index: 100; }

@media (max-width: 540px) {
  .grid { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); }
  .card[data-face="ar"] { font-size: 32px; }
  .flash-face { padding: 72px 18px; }
  .quiz-letter { font-size: 64px; }
  .tabs { position: sticky; top: 0; }
}

@media (min-width: 1024px) { .tab-panels { max-width: 1100px; } }
@media (prefers-reduced-motion: reduce) { * { transition: none !important; } }


